<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Timetable Solution Viewer</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="container">
        <h1>School Timetable Solution Viewer</h1>
        <p class="subtitle">Enter a job ID, choose a class, and view its schedule grouped by days.</p>

        <!-- Endpoint Selection Section -->
        <div class="endpoint-section">
            <h2>Solve a New Problem</h2>
            <p class="endpoint-subtitle">Select a problem and click "Solve" to submit it</p>
            <div class="endpoint-controls">
                <select id="endpointSelect">
                    <option value="">-- Select a problem --</option>
                    <option value="/jobs/from-all-csv">Load from CSV Files</option>
                    <option value="/jobs/from-all-csv-678-A-lim">Load from CSV (6,7,8 grades A-lim)</option>
                    <option value="/jobs/from-all-csv-678-AB">Load from CSV Files (6,7,8 grades AB)</option>
                    <option value="/jobs/from-all-csv-9-ABC">Load from CSV Files (9 grades ABC)</option>
                    <option value="/jobs/from-all-csv-9-ABC-lim">Load from CSV Files (9 grades ABC-lim)</option>
                </select>
                <button id="solveBtn" onclick="submitEndpoint()">Solve</button>
            </div>
            <div id="endpointStatus" class="endpoint-status"></div>
        </div>

        <!-- Existing Solution Viewer Section -->
        <div class="viewer-section">
            <h2>View Solution</h2>
            <p class="viewer-subtitle">Enter a job ID to view its solution</p>

            <div class="controls">
                <input type="text" id="jobIdInput" placeholder="Enter Job ID" />
                <button id="fetchBtn" onclick="fetchSolution()">Fetch Solution</button>
            <select id="classSelect" disabled onchange="renderSelectedClass()">
                    <option value="">Select class...</option>
                </select>
            </div>
        </div>

        <div id="status" class="status"></div>

        <div id="scoreSection" class="score-section">
            <div class="score-title">Solution Score</div>
            <div class="score-values">
                <div class="score-item">
                    <div class="score-label">Hard score</div>
                    <div id="hardScore" class="score-value">-</div>
                </div>
                <div class="score-item">
                    <div class="score-label">Soft score</div>
                    <div id="softScore" class="score-value">-</div>
                </div>
            </div>
            <div id="constraintMatches" class="constraint-matches"></div>
        </div>

        <div id="timetableContainer" class="timetable-container">
            <table id="timetableTable"></table>
        </div>

        <div id="loading" class="loading">
            <div class="spinner"></div>
            <div>Solving started, please don't close this page.</div>
        </div>

        <div id="emptyState" class="empty-state">
            <div class="empty-state-icon">ðŸ“‹</div>
            <p>No lessons found for this class.</p>
        </div>
    </div>

    <script src="/js/script.js"></script>
</body>
</html>
